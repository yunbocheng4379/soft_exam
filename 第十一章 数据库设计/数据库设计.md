# 数据库设计

## 1. 数据库体系结构

### 1.1 数据库三级模式-两级映射

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021413829.png)

### 1.2 视图

#### 1.2.1 数据库表类型

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021417756.png)

#### 1.2.2 视图表

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021418897.png)

#### 1.2.3 视图的优点

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021420335.png)

#### 1.2.4 物化视图

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021421798.png)

#### 1.2.5 注意点

- 视图并不能提高查询效率，因为每次查询都是使用SQL语句查询的基础表。
- 物化视图是将SQL语句查询出来的结果进行存储，不需要每次在执行查询视图结果的SQL，直接查询存储后的结果即可，这个是可以提高查询效率的。
- 物化视图不能进行增删改操作，这个物化视图存在的意义就是为了查询，需要修改基础表数据，物化视图中的数据会随基础表中的数据自动进行更新。



### 1.3 索引

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021429249.png)



### 1.4 数据库模式习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021430451.png)

**答案：B（外模式）**



### 1.5 分布式数据库体系结构

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021448795.png)



### 1.6 分布式数据库相关概念

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021452150.png)



### 1.7 分布式数据库习题讲解1

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021454726.png)

**答案：D（全局概念模式）**



### 1.8 分布式数据库习题讲解2

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021455345.png)

**答案：C（位置透明），题干中明确指出“物理位置”。**



### 1.9 分库、分区与分表概述

#### 1.9.1 分库

**将一个数据库拆分为两个数据库，将原始数据库中的数据表分配到不同的数据库中。**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021457166.png)

#### 1.9.2 分表

**将一张大表按照特定规则（如国内用户、外国用户）水平拆分到多个物理表中，每个表存储部分数据。**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021457968.png)

#### 1.9.3 分区

**将一张的数据按照规则划分到多个逻辑分区，但对应用透明（仍视为单表操作），数据存储在同一个数据库实列内。**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021503191.png)

#### 1.9.4 分表与分区对比

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021505136.png)



### 1.10 分区策略

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021517713.png)

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021518834.png)



### 1.11 分区的优点

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021520046.png)



## 2. 数据库设计

### 2.1 数据库设计过程概述

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021644561.png)

### 2.2 数据库设计习题讲解1

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021645318.png)

### 2.3 概念结构设计

#### 2.3.1 概念结构设计过程

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021650893.png)

#### 2.3.1 E-R图

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021651142.png)



### 2.4 逻辑结构设计

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021656557.png)

**完整性约束**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021655805.png)



### 2.5 数据库设计习题讲解2

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021657150.png)



### 2.6 逻辑结构设计 -- 完整性习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021658041.png)



## 3. 关系代数

### 3.1 关系代数1（并交差）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021710776.png)



### 3.2 关系代数习题讲解1

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021712913.png)



### 3.3 关系代数2（投影与选择）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508021728696.png)

- **投影【列】用符号 π 表示，选择【行（元组）】用符号 σ  表示**   

### 3.4 关系代数3（笛卡尔积）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508040936006.png)

**笛卡尔积结果**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508040937851.png)



### 3.5 关系代数4（自然连接）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508040959559.png)

**自然连接需要“先进行选择【行】，在进行投影【列】”操作，而笛卡尔积是“先进行投影【列】，在进行选择【行】”**

### 3.6 关系代数习题讲解2

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508040946538.png)



### 3.7 关系代数习题讲解3

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508040951437.png)

**两个表存在同名的列，需要使用 表名.列名 的形式表示，排除A选择C，A就是因为缺少表名**



## 4.  规范化理论

### 4.1 规范化理论基础概念1（函数依赖）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041025295.png)

### 4.2 规范化理论基础概念2（公理体系）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041043457.png)



### 4.3 规范化理论基础概念3（属性与候选键概念）

 ![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041054893.png)



### 4.4 规范化理论基础概念4（候选键分析-图示法）

#### 4.4.1 图示法规则

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041326431.png)

#### 4.4.2 图示法例题

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041327776.png)



### 4.5 候选键习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041332140.png)

**A和D可以自己推自己**



### 4.6 非规范化存在的问题

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041336455.png)



### 4.7 范式概述

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041437708.png)

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041435459.png)



### 4.8 第一范式（1NF）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041438991.png)



### 4.9 第二范式（2NF）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041443816.png)



### 4.10 第三范式（3NF）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041445686.png)



### 4.11 BC范式（BCNF）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041449903.png)

**注：数据库表满足三范式后，大部分都已经满足BC范式。**



### 4.12 范式习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041454022.png)



### 4.13 模式分解（是否保持函数依赖）

#### 4.13.1 是否保持函数依赖方式分解规则

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041458092.png)

#### 4.13.2 是否保持函数依赖方式分解习题

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041542228.png)

**第三个选项：R1(A,B) 推出 A -> B, R2(A,C) 推出 A -> C，原始的F中还存在 B->C，通过R1和R2的结果推导不出 B->C，所示没有保持函数依赖**

### 4.14 模式分解（是否无损—公式法）

#### 4.14.1 无损分解定义

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041544683.png)

#### 4.14.2 无损分解使用公式法规则

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041547052.png)

**例题**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041549842.png)

**可以存在 不保持函数依赖方式，但是满足无损的情况**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041553544.png)

**不仅如何其实四种情况都存在：（保持函数依赖方式并且无损、保持函数依赖方式并且有损、不保持函数依赖方式并且无损、不保持函数依赖方式并且有损），判断时要格外小心**



### 4.15 模式分解习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041604229.png)



### 4.16 反规范化（逆规范化）

#### 4.16.1 反规范化技术手段

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041612182.png)

#### 4.16.2 反规范化优点与缺点

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041629350.png)



## 5. 数据库控制功能

### 5.1 数据库控制功能概述

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041632944.png)



### 5.2 安全性

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041636584.png)



### 5.3 安全性习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041637719.png)

**索引：提高查询效率，视图：题目说进行数据更新，视图可能查询数据，触发器：题目说“调用”，触发器相当于一个定时器，是自己调用的，而不是供第三方人员调用的。**



### 5.4 并发控制

#### 5.4.1 数据库事务

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041641153.png)

#### 5.4.2 并发产生的问题

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041645306.png)

### 5.5 并发控制习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041646023.png)



### 5.6 分布式事务管理（2PC）

#### 5.6.1 2PC规则

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041648301.png)

#### 5.6.2 2PC事务处理过程

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041648906.png)



### 5.7 分布式事务管理习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041650962.png)



### 5.8 数据备份

#### 5.8.1 备份的分类

**（1）按照数据库运行是否正常分类：冷备份和热备份**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041653470.png)

**（2）按照备份量分类：完全备份、增量备份和差量备份**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041658645.png)



### 5.9 数据库备份习题讲解

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041713808.png)

### 5.10 故障恢复

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041755098.png)



## 6. 数据库性能优化

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041759773.png)



## 7. 数据库系统扩展

### 7.1 NoSQL

#### 7.1.1 NoSQL和关系型数据库对比

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041804847.png)

#### 7.1.2 NoSQL数据库类型及对比

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041806312.png)



### 7.2 联邦数据库系统

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041808344.png)



### 7.3 模式分解补充扩展（含表格法判断是否无损）

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041833937.png)

  **习题**

![](https://gitee.com/YunboCheng/image-bad/raw/master/imgs/202508041845420.png)























